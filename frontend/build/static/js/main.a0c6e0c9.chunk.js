(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{218:function(e,t,r){},219:function(e,t,r){},261:function(e,t,r){},262:function(e,t,r){"use strict";r.r(t);var a=r(275),n=r(145),c=r(0),s=r.n(c),l=r(14),i=r(53),o=r(25),u=r(277),j=r(274),d=r(58),b=r(94),h=r(79),x=r.n(h),O=r(138),p=r.n(O);function f(){return(f=Object(b.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/ghosts/api/ghost/list");case 2:return t=e.sent,console.log("get structure list in api"),console.log(t),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(b.a)(Object(d.a)().mark((function e(t){var r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sent open request ".concat(t)),e.next=3,x.a.post("/ghosts/api/ghost/kick?character_id=".concat(t),{character_id:t},{headers:{"X-CSRFToken":p.a.getItem("csrftoken")}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x.a.defaults.xsrfHeaderName="X-CSRFToken";var m=r(78),v=r(2),y=function(){return Object(v.jsx)(u.a.Body,{className:"flex-container",children:Object(v.jsx)(m.a,{className:"spinner-size"})})},w=r(57),S=r(13),C=r(269),F=r(41),k=r(279),P=r(42),_=r(76),N=r(270),H=r(271),L=r(272),z=r(141),R=r(278),D=r(273),B=(r(218),r(219),function(){return Object(v.jsx)(u.a.Body,{className:"flex-container",children:Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("div",{className:"error-size bottom-text",children:Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-exclamation-triangle error-anim",viewBox:"0 0 16 16",children:[Object(v.jsx)("path",{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"}),Object(v.jsx)("path",{d:"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"})]})}),Object(v.jsx)("h3",{className:"text-margin",children:"Error Loading Component"})]})})});var M={option:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})}};function T(e){var t=e.message;return Object(v.jsx)(C.a,{id:"character_tooltip",children:t})}function E(e){var t=e.column;t.filterValue,t.preFilteredRows,t.setFilter;return Object(v.jsx)(v.Fragment,{})}function A(e){var t=e.column,r=t.filterValue,a=t.preFilteredRows,n=t.setFilter,c=a.length;return Object(v.jsx)("input",{className:"form-control",value:r||"",onChange:function(e){n(e.target.value||void 0)},placeholder:"Search ".concat(c," records...")})}function G(e){var t=e.column,r=t.setFilter,a=t.filterValue,n=t.preFilteredRows,c=t.id,l=s.a.useMemo((function(){var e=new Set;return n?(n.forEach((function(t){null!==t.values[c]&&("object"===typeof t.values[c]?e.add(t.values[c].name):e.add(t.values[c]))})),Object(w.a)(e.values())):[]}),[c,n]);return Object(v.jsx)(_.a,{title:a,onChange:function(e){return r(e.value)},value:{label:a||"All"},defaultValue:{label:"All"},styles:M,options:[{id:-1,value:"",label:"All"}].concat(l.map((function(e,t){return{id:t,value:e,label:e}})))},a)}var V=function(){return{}};var W=function(e){var t=e.isLoading,r=e.isFetching,a=e.data,n=e.error,c=e.columns,l=e.asyncExpandFunction,i=e.getRowProps,o=void 0===i?V:i,u=s.a.useMemo((function(){return{Filter:E}}),[]),j=s.a.useMemo((function(){return{text:function(e,t,r){return e.filter((function(e){return t.some((function(t){if(r){var a=e.values[t];return"object"===typeof a&&(a=a.name),e.hasOwnProperty("originalSubRows")&&(a+=e.originalSubRows.reduce((function(e,r){return e+" "+(a=r,t.split(".").reduce((function(e,t){return e[t]}),a));var a}),"")),!!a&&a.toLowerCase().includes(r.toLowerCase())}return!0}))}))}}}),[]),d=Object(P.useTable)({columns:c,data:a,defaultColumn:u,filterTypes:j,initialState:{pageSize:20}},P.useFilters,P.useSortBy,P.useExpanded,P.usePagination),b=d.getTableProps,h=d.getTableBodyProps,x=d.headerGroups,O=d.page,p=d.prepareRow,f=d.canPreviousPage,g=d.canNextPage,y=d.pageOptions,w=d.pageCount,C=d.gotoPage,_=d.nextPage,M=d.previousPage,A=d.setPageSize,G=d.visibleColumns,W=d.state,I=W.pageIndex,J=W.pageSize;return t?Object(v.jsx)("div",{className:"col-xs-12 text-center",children:Object(v.jsx)(m.a,{className:"spinner-size"})}):n?Object(v.jsx)(B,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(N.a,{striped:!0,children:[Object(v.jsxs)("thead",Object(S.a)(Object(S.a)({},b()),{},{children:[x.map((function(e){return Object(v.jsx)("tr",Object(S.a)(Object(S.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsxs)("th",Object(S.a)(Object(S.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(v.jsx)("span",{className:"pull-right",children:e.canSort?e.isSorted?e.isSortedDesc?Object(v.jsx)(H.a,{glyph:"sort-by-attributes-alt"}):Object(v.jsx)(H.a,{glyph:"sort-by-attributes"}):Object(v.jsx)(H.a,{glyph:"sort"}):""})]}))}))}))})),x.map((function(e){return Object(v.jsx)("tr",Object(S.a)(Object(S.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsx)("th",Object(S.a)(Object(S.a)({},e.getHeaderProps()),{},{children:Object(v.jsx)("div",{children:e.canFilter?e.render("Filter"):null})}))}))}))}))]})),Object(v.jsx)("tbody",Object(S.a)(Object(S.a)({},h()),{},{children:O.map((function(e,t){p(e);var r=o(e);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("tr",Object(S.a)(Object(S.a)({},e.getRowProps(r)),{},{children:e.cells.map((function(e){return Object(v.jsx)("td",Object(S.a)(Object(S.a)({style:{verticalAlign:"middle"}},e.getCellProps()),{},{children:e.render("Cell")}))}))})),e.isExpanded&&l({row:e,rowProps:r,visibleColumns:G})]})}))}))]}),Object(v.jsx)("div",{className:"pagination pull-right",children:Object(v.jsxs)(L.a,{children:[Object(v.jsxs)(z.a,{children:[Object(v.jsx)(F.a,{bsStyle:"success",onClick:function(){return C(0)},disabled:!f,children:Object(v.jsx)(H.a,{glyph:"step-backward"})})," ",Object(v.jsx)(F.a,{bsStyle:"success",onClick:function(){return M()},disabled:!f,children:Object(v.jsx)(H.a,{glyph:"triangle-left"})})," ",Object(v.jsx)(F.a,{bsStyle:"success",onClick:function(){return _()},disabled:!g,children:Object(v.jsx)(H.a,{glyph:"triangle-right"})})," ",Object(v.jsx)(F.a,{bsStyle:"success",onClick:function(){return C(w-1)},disabled:!g,children:Object(v.jsx)(H.a,{glyph:"step-forward"})})]}),Object(v.jsxs)(z.a,{children:[Object(v.jsx)(F.a,{active:!0,bsStyle:"success",children:"Page Size:"})," ",Object(v.jsx)(R.a,{id:"pageSizeDropdown",bsStyle:"success",title:J,onSelect:function(e){A(Number(e))},children:[20,50,100,1e6].map((function(e){return Object(v.jsxs)(D.a,{id:e,eventKey:e,value:e,children:["Show ",e]},e)}))})]})]})}),Object(v.jsx)("div",{className:"pagination pull-left",children:Object(v.jsxs)(z.a,{children:[Object(v.jsx)(F.a,{active:!0,bsStyle:"info",children:Object(v.jsx)(v.Fragment,{children:y.length>0?Object(v.jsxs)(v.Fragment,{children:["Page"," ",Object(v.jsxs)("strong",{children:[I+1," of ",y.length]})]}):Object(v.jsxs)(v.Fragment,{children:["Page ",Object(v.jsx)("strong",{children:"- of -"})]})})})," ",r?Object(v.jsx)(k.a,{placement:"bottom",overlay:T({message:"Refreshing Data"}),children:Object(v.jsx)(F.a,{bsStyle:"info",children:Object(v.jsx)(H.a,{className:"glyphicon-refresh-animate",glyph:"refresh"})})}):Object(v.jsx)(k.a,{placement:"bottom",overlay:T({message:"Data Loaded: "+(new Date).toLocaleString()}),children:Object(v.jsx)(F.a,{bsStyle:"info",children:Object(v.jsx)(H.a,{glyph:"ok"})})})]})})]})},I=r(276),J={option:function(e){return Object(S.a)(Object(S.a)({},e),{},{color:"black"})}},Q=function(e){var t=e.setFilter,r=e.data,a=e.labelText,n=e.isFetching,c=r.map((function(e){return{value:e,label:e}}));return Object(v.jsxs)("div",{className:"flex-label-container",children:[Object(v.jsx)("div",{className:"flex-label",children:Object(v.jsx)("h5",{children:a})}),Object(v.jsx)(_.a,{className:"flex-select",styles:J,options:c,isLoading:n,isMulti:!0,onChange:function(e){var r=e.map((function(e){return e.value}));console.log(r.sort().join(",")),t(r.sort())}})]})},K=function(e){var t=e.character_id;return Object(v.jsx)(F.a,{bsStyle:"info",onClick:function(){!function(e){g.apply(this,arguments)}(t)},children:Object(v.jsx)("i",{class:"fas fa-external-link-alt"})})},X=function(e){var t=e.character_name;return Object(v.jsx)(F.a,{target:"_blank",rel:"noopener noreferrer",alt:"zKillboard",href:"https://zkillboard.com/search/".concat(t,"/"),children:Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"13.5",width:"15",viewBox:"0 0 32 21",children:[Object(v.jsx)("polygon",{points:"1,7 31,7 16,21",style:{fill:"currentColor",stroke:"currentColor",strokeWidth:2}}),Object(v.jsx)("polygon",{points:"1,2 31,2",style:{fill:"currentColor",stroke:"currentColor",strokeWidth:2}})]})})},q=function(e){var t=e.character_id;return Object(v.jsx)(F.a,{target:"_blank",rel:"noopener noreferrer",alt:"Eve Who",href:"https://evewho.com/character/".concat(t,"/"),children:Object(v.jsx)("i",{class:"fas fa-user"})})},U=function(e){var t=e.character_id,r=e.character_name;return Object(v.jsxs)(z.a,{style:{display:"flex"},children:[Object(v.jsx)(K,{character_id:t}),Object(v.jsx)(F.a,{style:{flexGrow:1},children:r}),Object(v.jsx)(X,{character_name:r}),Object(v.jsx)(q,{character_id:t})]})},Y=function(){var e=Object(i.useQuery)(["dashboard"],(function(){return function(){return f.apply(this,arguments)}()}),{refetchOnWindowFocus:!1}),t=e.isLoading,r=e.error,a=e.data,n=e.isFetching,l=Object(c.useState)(!1),d=Object(o.a)(l,2),b=d[0],h=d[1],x=Object(c.useState)([]),O=Object(o.a)(x,2),p=O[0],g=O[1],m=s.a.useMemo((function(){return[{Header:"Character",accessor:"char.name",Filter:A,filter:"text",Cell:function(e){return Object(v.jsx)(U,{character_id:e.row.original.char.id,character_name:e.value})}},{Header:"Main",accessor:"main.name",Filter:A,filter:"text",Cell:function(e){return Object(v.jsx)(U,{character_id:e.row.original.main.id,character_name:e.value})}},{Header:"Corp",accessor:"main.corp",Filter:G,filter:"text",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Alliance",accessor:"main.alli",Filter:G,filter:"text",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Location",accessor:"location.name",Filter:G,filter:"text",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Ship",accessor:"ship.name",Filter:G,filter:"text",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Death Clone",accessor:"death_clone.name",Filter:G,filter:"text",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Last Online",accessor:"logoff_date",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value?Object(v.jsx)(I.a,{date:Date.parse(e.value)}):Object(v.jsx)(v.Fragment,{})})}},{Header:"Join Date",accessor:"start_date",Cell:function(e){return Object(v.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value?Object(v.jsx)(I.a,{date:Date.parse(e.value)}):Object(v.jsx)(v.Fragment,{})})}}]}),[]);if(t)return Object(v.jsx)(y,{});if(r)return Object(v.jsx)(B,{});var w=a.characters;return p.length>0&&(w=w.filter((function(e){return!p.includes(e.location.name)}))),b&&(w=w.filter((function(e){return!a.alliances.includes(e.main.alli_id)}))),Object(v.jsxs)(u.a.Body,{children:[Object(v.jsxs)("div",{class:"col-xs-12",style:{display:"flex"},children:[Object(v.jsx)("div",{style:{flexGrow:1},children:Object(v.jsx)(Q,{data:a.stagings,setFilter:g,labelText:"Staging Filter",isFetching:n})}),Object(v.jsx)(j.a,{onChange:function(e){h(e.target.checked)},children:"Orphans Only"})]}),Object(v.jsx)(W,{data:w,isLoading:t,columns:m,error:r,isFetching:n})]})};r(261);a.a.addDefaultLocale(n);var Z=new i.QueryClient,$=function(){return Object(v.jsx)(i.QueryClientProvider,{client:Z,children:Object(v.jsx)(Y,{})})},ee=document.getElementById("root");Object(l.render)(Object(v.jsx)($,{}),ee)}},[[262,1,2]]]);
//# sourceMappingURL=main.a0c6e0c9.chunk.js.map
