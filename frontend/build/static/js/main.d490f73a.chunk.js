(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{218:function(e,t,n){},219:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var r=n(275),a=n(145),c=n(0),s=n.n(c),i=n(14),l=n(53),o=n(25),u=n(141),j=n(40),d=n(277),b=n(274),h=n(58),p=n(94),O=n(79),x=n.n(O),f=n(138),g=n.n(f);function m(){return(m=Object(p.a)(Object(h.a)().mark((function e(){var t;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/ghosts/api/ghost/list");case 2:return t=e.sent,console.log("get structure list in api"),console.log(t),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(p.a)(Object(h.a)().mark((function e(t){var n;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sent open request ".concat(t)),e.next=3,x.a.post("/ghosts/api/ghost/kick?character_id=".concat(t),{character_id:t},{headers:{"X-CSRFToken":g.a.getItem("csrftoken")}});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x.a.defaults.xsrfHeaderName="X-CSRFToken";var y=n(78),w=n(2),S=function(){return Object(w.jsx)(d.a.Body,{className:"flex-container",children:Object(w.jsx)(y.a,{className:"spinner-size"})})},F=n(57),C=n(13),P=n(269),k=n(279),N=n(41),H=n(52),L=n(270),z=n(271),R=n(272),D=n(278),M=n(273),T=(n(218),n(219),function(){return Object(w.jsx)(d.a.Body,{className:"flex-container",children:Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsx)("div",{className:"error-size bottom-text",children:Object(w.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",fill:"currentColor",class:"bi bi-exclamation-triangle error-anim",viewBox:"0 0 16 16",children:[Object(w.jsx)("path",{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"}),Object(w.jsx)("path",{d:"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"})]})}),Object(w.jsx)("h3",{className:"text-margin",children:"Error Loading Component"})]})})});var B={option:function(e){return Object(C.a)(Object(C.a)({},e),{},{color:"black"})}};function _(e){var t=e.message;return Object(w.jsx)(P.a,{id:"character_tooltip",children:t})}function A(e){var t=e.column;t.filterValue,t.preFilteredRows,t.setFilter;return Object(w.jsx)(w.Fragment,{})}function E(e){var t=e.column,n=t.filterValue,r=t.preFilteredRows,a=t.setFilter,c=r.length;return Object(w.jsx)("input",{className:"form-control",value:n||"",onChange:function(e){a(e.target.value||void 0)},placeholder:"Search ".concat(c," records...")})}function V(e){var t=e.column,n=t.setFilter,r=t.filterValue,a=t.preFilteredRows,c=t.id,i=s.a.useMemo((function(){var e=new Set;return a?(a.forEach((function(t){null!==t.values[c]&&("object"===typeof t.values[c]?e.add(t.values[c].name):e.add(t.values[c]))})),Object(F.a)(e.values())):[]}),[c,a]);return Object(w.jsx)(H.a,{title:r,onChange:function(e){return n(e.value)},value:{label:r||"All"},defaultValue:{label:"All"},styles:B,options:[{id:-1,value:"",label:"All"}].concat(i.map((function(e,t){return{id:t,value:e,label:e}})))},r)}var G=function(){return{}};var I=function(e){var t=e.isLoading,n=e.isFetching,r=e.data,a=e.error,c=e.columns,i=e.asyncExpandFunction,l=e.getRowProps,o=void 0===l?G:l,d=s.a.useMemo((function(){return{Filter:A}}),[]),b=s.a.useMemo((function(){return{text:function(e,t,n){return e.filter((function(e){return t.some((function(t){if(n){var r=e.values[t];return"object"===typeof r&&(r=r.name),e.hasOwnProperty("originalSubRows")&&(r+=e.originalSubRows.reduce((function(e,n){return e+" "+(r=n,t.split(".").reduce((function(e,t){return e[t]}),r));var r}),"")),!!r&&r.toLowerCase().includes(n.toLowerCase())}return!0}))}))}}}),[]),h=Object(N.useTable)({columns:c,data:r,defaultColumn:d,filterTypes:b,initialState:{pageSize:20}},N.useFilters,N.useSortBy,N.useExpanded,N.usePagination),p=h.getTableProps,O=h.getTableBodyProps,x=h.headerGroups,f=h.page,g=h.prepareRow,m=h.canPreviousPage,v=h.canNextPage,S=h.pageOptions,F=h.pageCount,P=h.gotoPage,H=h.nextPage,B=h.previousPage,E=h.setPageSize,V=h.visibleColumns,I=h.state,J=I.pageIndex,Q=I.pageSize;return t?Object(w.jsx)("div",{className:"col-xs-12 text-center",children:Object(w.jsx)(y.a,{className:"spinner-size"})}):a?Object(w.jsx)(T,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(L.a,{striped:!0,children:[Object(w.jsxs)("thead",Object(C.a)(Object(C.a)({},p()),{},{children:[x.map((function(e){return Object(w.jsx)("tr",Object(C.a)(Object(C.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(w.jsxs)("th",Object(C.a)(Object(C.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(w.jsx)("span",{className:"pull-right",children:e.canSort?e.isSorted?e.isSortedDesc?Object(w.jsx)(z.a,{glyph:"sort-by-attributes-alt"}):Object(w.jsx)(z.a,{glyph:"sort-by-attributes"}):Object(w.jsx)(z.a,{glyph:"sort"}):""})]}))}))}))})),x.map((function(e){return Object(w.jsx)("tr",Object(C.a)(Object(C.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(w.jsx)("th",Object(C.a)(Object(C.a)({},e.getHeaderProps()),{},{children:Object(w.jsx)("div",{children:e.canFilter?e.render("Filter"):null})}))}))}))}))]})),Object(w.jsx)("tbody",Object(C.a)(Object(C.a)({},O()),{},{children:f.map((function(e,t){g(e);var n=o(e);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("tr",Object(C.a)(Object(C.a)({},e.getRowProps(n)),{},{children:e.cells.map((function(e){return Object(w.jsx)("td",Object(C.a)(Object(C.a)({style:{verticalAlign:"middle"}},e.getCellProps()),{},{children:e.render("Cell")}))}))})),e.isExpanded&&i({row:e,rowProps:n,visibleColumns:V})]})}))}))]}),Object(w.jsx)("div",{className:"pagination pull-right",children:Object(w.jsxs)(R.a,{children:[Object(w.jsxs)(u.a,{children:[Object(w.jsx)(j.a,{bsStyle:"success",onClick:function(){return P(0)},disabled:!m,children:Object(w.jsx)(z.a,{glyph:"step-backward"})})," ",Object(w.jsx)(j.a,{bsStyle:"success",onClick:function(){return B()},disabled:!m,children:Object(w.jsx)(z.a,{glyph:"triangle-left"})})," ",Object(w.jsx)(j.a,{bsStyle:"success",onClick:function(){return H()},disabled:!v,children:Object(w.jsx)(z.a,{glyph:"triangle-right"})})," ",Object(w.jsx)(j.a,{bsStyle:"success",onClick:function(){return P(F-1)},disabled:!v,children:Object(w.jsx)(z.a,{glyph:"step-forward"})})]}),Object(w.jsxs)(u.a,{children:[Object(w.jsx)(j.a,{active:!0,bsStyle:"success",children:"Page Size:"})," ",Object(w.jsx)(D.a,{id:"pageSizeDropdown",bsStyle:"success",title:Q,onSelect:function(e){E(Number(e))},children:[20,50,100,1e6].map((function(e){return Object(w.jsxs)(M.a,{id:e,eventKey:e,value:e,children:["Show ",e]},e)}))})]})]})}),Object(w.jsx)("div",{className:"pagination pull-left",children:Object(w.jsxs)(u.a,{children:[Object(w.jsx)(j.a,{active:!0,bsStyle:"info",children:Object(w.jsx)(w.Fragment,{children:S.length>0?Object(w.jsxs)(w.Fragment,{children:["Page"," ",Object(w.jsxs)("strong",{children:[J+1," of ",S.length]})]}):Object(w.jsxs)(w.Fragment,{children:["Page ",Object(w.jsx)("strong",{children:"- of -"})]})})})," ",n?Object(w.jsx)(k.a,{placement:"bottom",overlay:_({message:"Refreshing Data"}),children:Object(w.jsx)(j.a,{bsStyle:"info",children:Object(w.jsx)(z.a,{className:"glyphicon-refresh-animate",glyph:"refresh"})})}):Object(w.jsx)(k.a,{placement:"bottom",overlay:_({message:"Data Loaded: "+(new Date).toLocaleString()}),children:Object(w.jsx)(j.a,{bsStyle:"info",children:Object(w.jsx)(z.a,{glyph:"ok"})})})]})})]})},J=n(276),Q={option:function(e){return Object(C.a)(Object(C.a)({},e),{},{color:"black"})}},X=function(e){var t=e.setFilter,n=e.data,r=e.labelText,a=e.isFetching,c=n.map((function(e){return{value:e,label:e}}));return Object(w.jsxs)("div",{className:"flex-label-container",children:[Object(w.jsx)("div",{className:"flex-label",children:Object(w.jsx)("h5",{children:r})}),Object(w.jsx)(H.a,{className:"flex-select",styles:Q,options:c,isLoading:a,isMulti:!0,onChange:function(e){var n=e.map((function(e){return e.value}));console.log(n.sort().join(",")),t(n.sort())}})]})},q=function(){var e=Object(l.useQuery)(["dashboard"],(function(){return function(){return m.apply(this,arguments)}()})),t=e.isLoading,n=e.error,r=e.data,a=e.isFetching,i=Object(c.useState)(!1),h=Object(o.a)(i,2),p=h[0],O=h[1],x=Object(c.useState)([]),f=Object(o.a)(x,2),g=f[0],y=f[1],F=s.a.useMemo((function(){return[{Header:"Character",accessor:"char.name",Filter:E,filter:"text",Cell:function(e){return Object(w.jsx)("div",{children:Object(w.jsxs)(u.a,{style:{display:"flex"},children:[Object(w.jsx)(j.a,{bsStyle:"info",onClick:function(){!function(e){v.apply(this,arguments)}(e.row.original.char.id)},children:Object(w.jsx)("i",{class:"fas fa-external-link-alt"})}),Object(w.jsxs)(j.a,{target:"_blank",rel:"noopener noreferrer",href:"https://zkillboard.com/search/".concat(e.value,"/"),children:[e.value," "]})]})})}},{Header:"Main",accessor:"main.name",Filter:E,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Corp",accessor:"main.corp",Filter:V,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Alliance",accessor:"main.alli",Filter:V,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Location",accessor:"location.name",Filter:V,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Ship",accessor:"ship.name",Filter:V,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Death Clone",accessor:"death_clone.name",Filter:V,filter:"text",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value})}},{Header:"Last Online",accessor:"logoff_date",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value?Object(w.jsx)(J.a,{date:Date.parse(e.value)}):Object(w.jsx)(w.Fragment,{})})}},{Header:"Join Date",accessor:"start_date",Cell:function(e){return Object(w.jsx)("div",{style:{whiteSpace:"nowrap"},children:e.value?Object(w.jsx)(J.a,{date:Date.parse(e.value)}):Object(w.jsx)(w.Fragment,{})})}}]}),[]);if(t)return Object(w.jsx)(S,{});if(n)return Object(w.jsx)(T,{});var C=r.characters;return g.length>0&&(C=C.filter((function(e){return!g.includes(e.location.name)}))),p&&(C=C.filter((function(e){return!r.alliances.includes(e.main.alli_id)}))),Object(w.jsxs)(d.a.Body,{children:[Object(w.jsx)(X,{data:r.stagings,setFilter:y,labelText:"Staging Filter",isFetching:a}),Object(w.jsx)(b.a,{onChange:function(e){O(e.target.checked)},children:"Orphans Only"}),Object(w.jsx)(I,{data:C,isLoading:t,columns:F,error:n,isFetching:a})]})};n(261);r.a.addDefaultLocale(a);var K=new l.QueryClient,U=function(){return Object(w.jsx)(l.QueryClientProvider,{client:K,children:Object(w.jsx)(q,{})})},W=document.getElementById("root");Object(i.render)(Object(w.jsx)(U,{}),W)}},[[262,1,2]]]);
//# sourceMappingURL=main.d490f73a.chunk.js.map
